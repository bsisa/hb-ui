<ul class="menu">
<!--     <li class="dropdown has-menu"> -->
<!-- 	   	<a class="dropdown-toggle" href="#"><span class="icon" data-icon="Y"></span> Test Menu<span class="arrow">&nbsp;</span></a> -->
<!-- 		<ul class="dropdown-menu"> -->
<!-- 	        <li> -->
<!-- 		        <a><span class="icon" data-icon="G"></span><span>Item 1</span></a> -->
<!-- 	        </li> -->
<!-- 	        <li> -->
<!-- 	            <a><span class="icon" data-icon="G"></span><span>Item 2</span></a> -->
<!-- 	        </li> -->
<!-- 	        <li class="dropdown onhoveropen has-menu"> -->
<!-- 	            <a class="dropdown-toggle" href="#"><span class="icon" data-icon="G"></span><span>Sub-menu item</span><span class="arrow">&nbsp;</span></a> -->
<!-- 				<ul class="dropdown-menu"> -->
<!-- 	                <li  > -->
<!-- 	                    <a ><span class="icon" data-icon="G"></span><span>Sub item 1</span></a> -->
<!-- 	                </li> -->
<!-- 	                <li  > -->
<!-- 	                    <a ><span class="icon" data-icon="G"></span><span>Sub item 2</span></a> -->
<!-- 	                </li> -->
<!-- 	                <li  > -->
<!-- 	                    <a ><span class="icon" data-icon="G"></span><span>Sub item 3</span></a> -->
<!-- 	                </li> -->
<!-- 	            </ul> -->
<!-- 	        </li> -->
<!--         </ul> -->
<!--     </li> -->
    <!-- 
    ui.bootstrap: dropdown, dropdown-toggle, dropdown-menu
    htmlkickstart: has-menu, arrow
    custom: onhoveropen
    -->
    <li class="dropdown has-menu">
        <a class="dropdown-toggle" href="#"><i class="icon-map-marker"></i> Plans<span class="arrow">&nbsp;</span></a>
        <ul class="dropdown-menu">
            <li ng-repeat="menuItem in menuItems.maps" ng-class="{true: 'dropdown onhoveropen has-menu'}[menuItem.subItems!=null]">

                <a ng-if="menuItem.subItems" href="#" class="dropdown-toggle" ><span class="icon" data-icon="G"></span><span>{{menuItem.label}}</span><span class="arrow">&nbsp;</span></a>
                <a ng-if="!menuItem.subItems" href="{{menuItem.action}}"><span class="icon" data-icon="G"></span><span>{{menuItem.label}}</span></a>
                <ul class="dropdown-menu" ng-if="menuItem.subItems">
                    <li ng-repeat="menuSubItem in menuItem.subItems" >
                        <a href="{{menuSubItem.action}}" ng-class="menuSubItem.label ? '' : 'separator'" ><span class="icon" data-icon="G"></span><span>{{menuSubItem.label}}</span></a>
                    </li>
                </ul>

            </li>
        </ul>
    </li>

    <li class="dropdown has-menu">
        <a class="dropdown-toggle" href="#"><i class="icon-list"></i> Collections<span class="arrow">&nbsp;</span></a>
        <ul class="dropdown-menu">
            <li ng-repeat="menuItem in menuItems.collections" ng-class="{true: 'dropdown onhoveropen has-menu'}[menuItem.subItems!=null]">
                
                <a ng-if="menuItem.subItems" href="#" class="dropdown-toggle" ><span class="icon" data-icon="G"></span><span>{{menuItem.label}}</span><span class="arrow">&nbsp;</span></a>
                <a ng-if="!menuItem.subItems" href="{{menuItem.action}}"><span class="icon" data-icon="G"></span><span>{{menuItem.label}}</span></a>
                <ul class="dropdown-menu" ng-if="menuItem.subItems">
                    <li ng-repeat="menuSubItem in menuItem.subItems" >
                        <a href="{{menuSubItem.action}}" ng-class="menuSubItem.label ? '' : 'separator'" ><span class="icon" data-icon="G"></span><span>{{menuSubItem.label}}</span></a>
                    </li>
                </ul>
            </li>
        </ul>
    </li>

    <li class="dropdown has-menu">
        <a class="dropdown-toggle" href="#"><i class="icon-folder-open"></i>(25) Exploitation<span class="arrow">&nbsp;</span></a>
        <ul class="dropdown-menu">
            <li ng-repeat="menuItem in menuItems.operations"  ng-class="{true: 'dropdown onhoveropen has-menu'}[menuItem.subItems!=null]">
<!--                 <a><span class="icon" data-icon="G"></span><span>{{menuItem.label}}</span></a> -->
<!--                 <ul class="dropdown-menu" ng-if="menuItem.subItems"> -->
<!--                     <li ng-repeat="menuSubItem in menuItem.subItems" > -->
<!--                         <a ng-class="menuSubItem.label ? '' : 'separator'" ><span class="icon" data-icon="G"></span><span>{{menuSubItem.label}}</span></a> -->
<!--                     </li> -->
<!--                 </ul> -->
                <a ng-if="menuItem.subItems" href="#" class="dropdown-toggle" ><span class="icon" data-icon="G"></span><span>{{menuItem.label}}</span><span class="arrow">&nbsp;</span></a>
                <a ng-if="!menuItem.subItems && menuItem.action.type == 'link'" ng-href="{{menuItem.action.url}}" href=""><span class="icon" data-icon="G"></span><span>LINK : {{menuItem.label}}</span></a>
                <a ng-if="!menuItem.subItems && menuItem.action.type == 'modal'" ng-click="menuItem.action.functionRef(menuItem.action)" href=""><span class="icon" data-icon="G"></span><span>MODAL : {{menuItem.label}}</span></a>
                <ul class="dropdown-menu" ng-if="menuItem.subItems">
                    <li ng-repeat="menuSubItem in menuItem.subItems" >
<!--                         <a  -->
<!--                         ng-href="{{menuSubItem.action}}"  -->
<!--                         ng-class="menuSubItem.label ? '' : 'separator'" ><span class="icon" data-icon="G"></span><span>Cool Rasta 2 : {{menuSubItem.label}}</span></a> -->
		                <a 
		                ng-if="menuSubItem.action.type == 'link'"  
		                ng-href="{{menuSubItem.action.url}}"                                 
		                ng-class="menuSubItem.label ? '' : 'separator'">
		                <span class="icon" data-icon="G"></span><span>LINK : {{menuSubItem.label}}</span></a>
        		        <a 
        		        ng-if="menuSubItem.action.type == 'modal'" 
        		        ng-click="menuSubItem.action.functionRef(menuSubItem.action)" 
        		        ng-class="menuSubItem.label ? '' : 'separator'"><span class="icon" data-icon="G"></span><span>MODAL : function: {{menuSubItem.action.functionName}} :: {{menuSubItem.label}}</span></a>                        
                    </li>
                </ul>                
            </li>
        </ul>
    </li>

    <li class="dropdown has-menu">
        <a class="dropdown-toggle" href="#"><i class="icon-tasks"></i> Gestion<span class="arrow">&nbsp;</span></a>
        <ul class="dropdown-menu">
            <li ng-repeat="menuItem in menuItems.management"  ng-class="{true: 'dropdown onhoveropen has-menu'}[menuItem.subItems!=null]">
<!--                 <a><span class="icon" data-icon="G"></span><span>{{menuItem.label}}</span></a> -->
<!--                 <ul class="dropdown-menu" ng-if="menuItem.subItems"> -->
<!--                     <li ng-repeat="menuSubItem in menuItem.subItems" > -->
<!--                         <a ng-class="menuSubItem.label ? '' : 'separator'" ><span class="icon" data-icon="G"></span><span>{{menuSubItem.label}}</span></a> -->
<!--                     </li> -->
<!--                 </ul> -->
                <a ng-if="menuItem.subItems" href="#" class="dropdown-toggle" ><span class="icon" data-icon="G"></span><span>{{menuItem.label}}</span><span class="arrow">&nbsp;</span></a>
                <a ng-if="!menuItem.subItems" href="{{menuItem.action}}"><span class="icon" data-icon="G"></span><span>{{menuItem.label}}</span></a>                
                <ul class="dropdown-menu" ng-if="menuItem.subItems">
                    <li ng-repeat="menuSubItem in menuItem.subItems" >
                        <a href="{{menuSubItem.action}}" ng-class="menuSubItem.label ? '' : 'separator'" ><span class="icon" data-icon="G"></span><span>{{menuSubItem.label}}</span></a>
                    </li>
                </ul>                
            </li>
        </ul>
    </li>

    <li class="dropdown has-menu">
        <a class="dropdown-toggle" href="#"><i class="icon-hdd"></i> Données<span class="arrow">&nbsp;</span></a>
        <ul class="dropdown-menu">
            <li ng-repeat="menuItem in menuItems.data"  ng-class="{true: 'dropdown onhoveropen has-menu'}[menuItem.subItems!=null]">
<!--                 <a><span class="icon" data-icon="G"></span><span>{{menuItem.label}}</span></a> -->
<!--                 <ul class="dropdown-menu" ng-if="menuItem.subItems"> -->
<!--                     <li ng-repeat="menuSubItem in menuItem.subItems" > -->
<!--                         <a ng-class="menuSubItem.label ? '' : 'separator'" ><span class="icon" data-icon="G"></span><span>{{menuSubItem.label}}</span></a> -->
<!--                     </li> -->
<!--                 </ul> -->
                <a ng-if="menuItem.subItems" href="#" class="dropdown-toggle" ><span class="icon" data-icon="G"></span><span>{{menuItem.label}}</span><span class="arrow">&nbsp;</span></a>
                <a ng-if="!menuItem.subItems" href="{{menuItem.action}}"><span class="icon" data-icon="G"></span><span>{{menuItem.label}}</span></a>                
                <ul class="dropdown-menu" ng-if="menuItem.subItems">
                    <li ng-repeat="menuSubItem in menuItem.subItems" >
                        <a href="{{menuSubItem.action}}" ng-class="menuSubItem.label ? '' : 'separator'" ><span class="icon" data-icon="G"></span><span>{{menuSubItem.label}}</span></a>
                    </li>
                </ul>
            </li>
        </ul>
    </li>

    <li class="dropdown has-menu">
        <a class="dropdown-toggle" href="#"><i class="icon-cogs"></i> Manager<span class="arrow">&nbsp;</span></a>
        <ul class="dropdown-menu">
            <li ng-repeat="menuItem in menuItems.manager"  ng-class="{true: 'dropdown onhoveropen has-menu'}[menuItem.subItems!=null]">
<!--                 <a><span class="icon" data-icon="G"></span><span>{{menuItem.label}}</span></a> -->
<!--                 <ul class="dropdown-menu" ng-if="menuItem.subItems"> -->
<!--                     <li ng-repeat="menuSubItem in menuItem.subItems" > -->
<!--                         <a ng-class="menuSubItem.label ? '' : 'separator'" ><span class="icon" data-icon="G"></span><span>{{menuSubItem.label}}</span></a> -->
<!--                     </li> -->
<!--                 </ul> -->
                <a ng-if="menuItem.subItems" href="#" class="dropdown-toggle" ><span class="icon" data-icon="G"></span><span>{{menuItem.label}}</span><span class="arrow">&nbsp;</span></a>
                <a ng-if="!menuItem.subItems" href="{{menuItem.action}}"><span class="icon" data-icon="G"></span><span>{{menuItem.label}}</span></a>                
                <ul class="dropdown-menu" ng-if="menuItem.subItems">
                    <li ng-repeat="menuSubItem in menuItem.subItems" >
                        <a href="{{menuSubItem.action}}" ng-class="menuSubItem.label ? '' : 'separator'" ><span class="icon" data-icon="G"></span><span>{{menuSubItem.label}}</span></a>
                    </li>
                </ul>
            </li>
        </ul>
    </li>

    <li class="dropdown has-menu">
        <a class="dropdown-toggle" href="#"><i class="icon-briefcase"></i> {{activeJob.IDENTIFIANT.NOM}}<span class="arrow">&nbsp;</span></a>
        <ul class="dropdown-menu">
            <li ng-repeat="job in jobs" ><a ng-click="activateJob(job)" ><span class="icon" data-icon="G"></span><span>{{job.IDENTIFIANT.NOM}}</span></a></li>
        </ul>
    </li>

    <li class="right col_3 search-wrapper">
        <input class="search" type="text" placeholder="Recherche" />
        <button class="blue small pill"><i class="icon-search"></i></button>
        <button class="red small" ng-click="changeViewMode()"><i class="icon-desktop"></i></button>
    </li>
</ul>

<!-- TODO: notifications would better float on top of UI -->
<div ng-show="sharedStatusMessage.data || sharedErrorMessage.data" class="grid" ng-style="gridStyle">
	<div class="col_12">
		<div class="notifications clearfix">
			<div ng-show="sharedErrorMessage.data" class="notice error">
				<i class="icon-error-sign icon-large"></i>
				{{sharedErrorMessage.data}}
			</div>		
			<!-- Info TODO: should disappear after n seconds: built in with ngStrap alert. -->
			<div ng-show="sharedStatusMessage.data" class="notice info">
				<i class="icon-info-sign icon-large"></i>
				{{sharedStatusMessage.data}}
			</div>
		</div>
	</div>
</div>
<div>
    <script type="text/ng-template" id="chooseConfiguration.html">
        <div class="modal-header">
            <h3>Choisir la configuration</h3>
        </div>
        <div class="modal-body">
            <ul>
                <li ng-repeat="item in $$configurations">
                    <a class="configuration-item" ng-click="selected.item = item">{{ item.IDENTIFIANT.NOM }}</a>
                </li>
            </ul>

            Configuration sélectionnée: <b>{{ selected.item.IDENTIFIANT.NOM }}</b>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" ng-click="ok()">OK</button>
        </div>
    </script>
</div>
<div>
    <script type="text/ng-template" id="chooseParams.html">
        <div class="modal-header">
            <h3>Choisir le paramètre</h3>
        </div>
        <div class="modal-body" ng-repeat="field in itemDefinition.parameters">
        	<label for="field{{$index}}">The label {{$index}}: {{field.label}}</label>
            <input id="field{{$index}}" type="text" ng-model="field.value" />
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" ng-click="ok()">OK</button>
        </div>
    </script>
</div>
