<div hb-card-header>
	<!-- Custom validation message to be defined here -->
	<ul>
	<li ng-show="elfinForm.cfcCode.$error.required">Le <strong>code CFC</strong> est obligatoire</li>
	<li ng-show="elfinForm.cfcCode.$error.hbValidCode">Le <strong>code CFC</strong> n'est pas valide</li>
	<li ng-show="elfinForm.fournisseur.$error.required">Le <strong>fournisseur</strong> est obligatoire</li>
	<li ng-show="elfinForm.fournisseur.$error.editable">Le <strong>fournisseur</strong> doit être saisi à partir de la liste de sélection</li>
<!-- 	<li ng-show="elfinForm.amount.$error.number">Le <strong>montant</strong> n'est pas valide. Exemple valide: 100.50</li> -->
	<!-- If required is set the number exception is never triggered. (Might be fixed with Angular > 1.2.x) -->
<!-- 	<li ng-show="elfinForm.amount.$error.required">Le <strong>montant</strong> est obligatoire</li> -->
<!-- 	<li ng-show="elfinForm.cfcCode.$error.required">Le <strong>code CFC</strong> est obligatoire!</li> -->
<!-- 	<li ng-show="elfinForm.fournisseur.$error.required">Le <strong>fournisseur</strong> est obligatoire!</li> -->
<!-- 	<li ng-show="elfinForm.building.$error.required">Le <strong>No SAI</strong> est obligatoire!</li> -->
	</ul>
</div>
<div class="row" style="padding-top: 8px;">
	<div class="col-xs-12">
		<tabset><!-- ui.bootstrap AngularJS UI tabset -->
		<!-- Commande tab -->
		<tab> 
			<tab-heading>Commande</tab-heading>
		<div class="hb-tab">
		<div class="row" style="padding-right: 8px;">
			<!-- 1st column -->
			<div class="col-sm-6">

				<div class="form-group has-feedback" ng-class="getCssHasFeedback(elfinForm.orderNb)">				
					<label for="orderNb" class="col-sm-4 control-label">No commande</label>
					<div class="col-sm-8">
<!-- 						<input type="text" id="orderNb" name="orderNb" class="form-control" -->
<!-- 							ng-model="elfin.IDENTIFIANT.NOM" > -->
						<p class="form-control-static">{{elfin.IDENTIFIANT.NOM}}</p>
					</div>
				</div>
				<div class="form-group has-feedback" ng-class="getCssHasFeedback(elfinForm.type)">				
					<label for="type" class="col-sm-4 control-label">Type</label>
					<div class="col-sm-8">
						<div id="type" name="type" hb-single-select hb-single-select-options="typeChoices" ng-model="elfin.IDENTIFIANT.QUALITE" ></div>
					</div>
				</div>
				<div class="form-group has-feedback" ng-class="getCssHasFeedback(elfinForm.date)">				
					<label for="date" class="col-sm-4 control-label">Date</label>
					<div class="col-sm-4">
						<div hb-date id="date" name="date"
								ng-model="elfin.IDENTIFIANT.DE"></div>
					</div>
					<label for="auteur" class="col-sm-2 control-label">Auteur</label>
					<div class="col-sm-2">
						<p class="form-control-static">{{elfin.IDENTIFIANT.AUT}}</p>
					</div>
				</div>
				<div class="form-group">
					<label for="deadline" class="col-sm-4 control-label">Délai d'exécution</label>
					<div class="col-sm-4">
						<div hb-date id="deadline" name="deadline" ng-model="elfin.IDENTIFIANT.A"></div>
					</div>
				</div>
				<div class="form-group has-feedback" ng-class="getCssHasFeedback(elfinForm.contact)">
					<label for="contact" class="col-sm-4 control-label" >Personne à contacter</label>
					<div class="col-sm-8" >
						<input id="contact" name="contact" class="form-control" autocomplete="off" 
							ng-model="elfin.CARACTERISTIQUE.CAR2.VALEUR"></input>
					</div>
				</div>
			</div>
			<!-- 2nd column -->
 			<div class="col-sm-6">
 			
				<div class="form-group has-feedback" ng-class="getCssHasFeedback(elfinForm.objectsSelectionType)">				
					<label for="objectsSelectionType" class="col-sm-4 control-label">Séléction par</label>
					<div class="col-sm-8">
						<div id="objectsSelectionType" name="objectsSelectionType" hb-single-select hb-single-select-options="objectsSelectionTypeChoices" ng-model="selected.objectsSelectionType" ></div>
					</div>
				</div> 			
 			
				<div class="form-group has-feedback" ng-class="getCssHasFeedback(elfinForm.building)">
					<label for="building" class="col-sm-4 control-label">No SAI</label>
					<div ng-show="selected.objectsSelectionType === OBJECTS_SELECTION_TYPE_IMMEUBLE" class="col-sm-8">
						<div hb-choose-building 
							 hb-choose-building-id-name="building"
							 hb-choose-building-elfin-form="elfinForm"
							 hb-choose-building-elfin-model="selected.building"
							 hb-choose-building-tooltip="Recherche d'immeuble"
							 hb-choose-building-editable="{{canEdit}}" 
							 ></div>
					</div>
					<div ng-show="selected.objectsSelectionType !== OBJECTS_SELECTION_TYPE_IMMEUBLE" class="col-sm-8">
					    <p class="form-control-static">{{selected.building.IDENTIFIANT.OBJECTIF}}  - {{selected.building.IDENTIFIANT.ALIAS}} - {{selected.building.PARTENAIRE.PROPRIETAIRE.NOM}}</p>
					</div>
				</div>
				
				<div class="form-group has-feedback" ng-class="getCssHasFeedback(elfinForm.surface)">
					<label for="surface" class="col-sm-4 control-label">No objet</label>
					<div ng-show="selected.objectsSelectionType === OBJECTS_SELECTION_TYPE_SURFACE" class="col-sm-8">
						<div hb-choose-surface 
							 hb-choose-surface-id-name="surface"
							 hb-choose-surface-elfin-form="elfinForm"
							 hb-choose-surface-elfin-model="selected.surface"
							 hb-choose-surface-tooltip="Recherche d'unité locative"
							 hb-choose-surface-editable="{{canEdit}}" 
							 ></div>
					</div>
					<div ng-show="selected.objectsSelectionType !== OBJECTS_SELECTION_TYPE_SURFACE" class="col-sm-8">
					    <p class="form-control-static">{{selected.surface.IDENTIFIANT.OBJECTIF}} - {{selected.surface.PARTENAIRE.USAGER.VALUE}}</p>
					</div>					
					
				</div> 		
 			
				<div ng-if="elfin.IDENTIFIANT.QUALITE !== HB_ORDER_TYPE.BON_DE_COMMANDE" class="form-group has-feedback" ng-class="getCssHasFeedback(elfinForm.code)">
					<label for="code" class="col-sm-4 control-label">Code CFC</label>
					<div class="col-sm-8">
						<div hb-choose-code 
							 hb-choose-code-id-name="code"
							 hb-choose-code-elfin-form="elfinForm"
							 hb-choose-code-elfin-model="selected.code"
							 hb-choose-code-tooltip="Recherche de code CFC"
							 hb-choose-code-editable="{{canEdit}}" 
							 hb-choose-code-validate-code="true"
							 ></div>					
					</div>
				</div>
				
<!-- 				<div class="form-group has-feedback" ng-class="getCssHasFeedback(elfinForm.cfcCode)"> -->
<!-- 					<label for="cfcCode" class="col-sm-4 control-label">Code CFC</label> -->
<!-- 					<div class="col-sm-8"> -->
<!-- 					<pre>{{ elfinForm.cfcCode.$error | json }}</pre> -->
<!-- 						<div hb-typeahead-code  -->
<!-- 							 hb-typeahead-code-id-name="cfcCode" -->
<!-- 							 hb-typeahead-code-elfin-form="elfinForm" -->
<!-- 							 hb-typeahead-code-elfin-model="selected.code" -->
<!-- 							 hb-typeahead-code-tooltip="Recherche de code CFC" -->
<!-- 							 hb-typeahead-code-editable="{{canEdit}}" -->
<!-- 							 hb-typeahead-code-validate-code="true"   -->
<!-- 							 ></div>					 -->
<!-- 					</div> -->
<!-- 				</div>				 -->

				<div class="form-group has-feedback" ng-class="getCssHasFeedback(elfinForm.fournisseur)">
					<label for="fournisseur" class="col-sm-4 control-label">Fournisseur</label>
					<div class="col-sm-8">
<!-- 						<pre>{{ elfinForm.fournisseur.$error | json }}</pre> -->
<!-- 						<div class="input-group"> -->
							<input id="fournisseur" name="fournisseur" type="text" class="form-control"
								autocomplete="off"
								typeahead="actor as actor.GROUPE for actor in entrepriseActors | orderBy:'GROUPE' | actorListFilter:{'groupe': $viewValue} | limitTo:18"
								typeahead-editable="false"
								ng-model="selected.provider"
								ng-required="true">
<!-- 								<span -->
<!-- 								class="input-group-btn" tooltip="Recherche d'entreprise" -->
<!-- 								 > -->
<!-- 								<button class="btn btn-default" type="button" hb-choose-one -->
<!-- 									ng-click="hbChooseOne(selected, 'provider', entrepriseActors, '', actorChooseOneColumnsDefinition, actorChooseOneTemplate )"> -->
<!-- 									<i class="glyphicon glyphicon-list-alt"></i> -->
<!-- 								</button> -->
<!-- 							</span> -->
<!-- 						</div> -->
					</div>
				</div>
<!-- 				<div class="form-group has-feedback" ng-class="getCssHasFeedback(elfinForm.amount)"> -->
<!-- 					<label for="amount" class="col-sm-4 control-label">Montant</label> -->
<!-- 					<div class="col-sm-8"> -->
<!-- 						<input type="number" id="amount" name="amount" class="form-control" -->
<!-- 							ng-model="elfin.IDENTIFIANT.VALEUR" > -->
<!-- 					</div> -->
<!-- 				</div> -->
				<div class="form-group has-feedback" ng-class="getCssHasFeedback(elfinForm.concerns)">
					<label for="concerns" class="col-sm-4 control-label" >Concerne</label>
					<div class="col-sm-8" >
						<input id="concerns" name="concerns" class="form-control" autocomplete="off"
							ng-model="elfin.CARACTERISTIQUE.CAR1.VALEUR"></input>
					</div>
				</div>		
			</div>
			<div class="col-xs-12">
				<div class="form-group has-feedback" ng-class="getCssHasFeedback(elfinForm.remark)">
					<label for="remark" class="col-sm-2 control-label" >Description</label>
					<div class="col-sm-10" >
						<textarea id="remark" name="remark" class="form-control" rows="6" 
							autocomplete="off"
							ng-model="elfin.DIVERS.REMARQUE"></textarea>
					</div>
				</div>
			</div>
			<div class="col-xs-6 col-xs-offset-3 centre">
				<button class="btn btn-default" ng-if="elfin.IDENTIFIANT.QUALITE=='Bon de commande'" ng-click="printProviderPurchaseOrderReport(elfin)" tooltip="Format d'impression du bon de commande fournisseur" tooltip-popup-delay="1000" tooltip-placement="right" ><i class="glyphicon glyphicon-print"></i><span> Bon de commande fournisseur</span></button>
				<button class="btn btn-default" ng-if="elfin.IDENTIFIANT.QUALITE=='Bon de commande'" ng-click="printTenantPurchaseOrderReport(elfin)" tooltip="Format d'impression du bon de commande locataire" tooltip-popup-delay="1000" tooltip-placement="right" ><i class="glyphicon glyphicon-print"></i><span> Bon de commande locataire</span></button>
				<button class="btn btn-default" ng-if="elfin.IDENTIFIANT.QUALITE=='Confirmation de commande'" ng-click="printOrderConfirmationReport(elfin)" tooltip="Format d'impression du bon de commande locataire" tooltip-popup-delay="1000" tooltip-placement="right" ><i class="glyphicon glyphicon-print"></i><span> Confirmation de commande</span></button>
				<button class="btn btn-default" ng-if="elfin.IDENTIFIANT.QUALITE=='Contrat d\'entreprise'" ng-click="printEntrepriseContractReport(elfin)" tooltip="Format d'impression du bon de commande locataire" tooltip-popup-delay="1000" tooltip-placement="right" ><i class="glyphicon glyphicon-print"></i><span> Contrat d'entreprise</span></button>				
			</div>
			<div ng-if="elfin.IDENTIFIANT.QUALITE!=='Bon de commande'" class="col-xs-12">
<!-- 				<div class="row" style="padding: 8px;"> -->
				<div style="padding-left: 16px;padding-right: 8px;padding-top: 8px;padding-bottom: 8px;">
					<div class="form-group has-feedback" >
						<div hb-order-spreadsheet hb-order-elfin-form="elfinForm" ng-model="elfin"></div>
					</div>
				</div>
			</div> 			
 			</div>
		</div>
		</tab> 
		<!-- Annexes tab -->
		<tab> 
			<tab-heading><div hb-annexes-number></div></tab-heading>
			<div class="hb-tab"><div hb-annexes-component hb-annexes-merge="true"></div></div>
		</tab>			
		</tabset>
	</div>
</div>
